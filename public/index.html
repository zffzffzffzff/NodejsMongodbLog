<!DOCTYPE html>
<html>
<head>
  <title>539博客</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
  <script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://cdn.staticfile.org/popper.js/1.15.0/umd/popper.min.js"></script>
  <script src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
</head>
<body style="background-color: #F0F0F0">

	<div class="container">
		
		<!-- 导航条 -->
		<nav class="navbar navbar-expand-lg navbar-dark shadow" style="background-color: #171717;">
			<button class="navbar-toggler" type="button" data-toggle="collapse"
				data-target="#navbarTogglerDemo03"
				aria-controls="navbarTogglerDemo03" aria-expanded="false"
				aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<a class="navbar-brand" href="index.html">539博客</a>
			
			<img alt="comment" src="photo/pen.png" width=22px height=22px style="margin-left:30px; margin-right:0px">
				
			<div class="collapse navbar-collapse">
				<ul class="navbar-nav mr-sm-0 mt-2 mt-lg-0">
				<li class="nav-item">
					<a class="nav-link" href="write.html" style="color:#E0E0E0" onmouseover="this.style.color='#FFFFFF'" onmouseout="this.style.color='#E0E0E0'">
					创作中心
					</a>
				</li>
				<li class="nav-item" style="margin-left:20px">
					<a class="nav-link disabled" href="#">
					19计算机2班 190110910539 朱芳菲
					</a>
				</li>
				</ul>
				
				<form class="form-inline ml-auto my-2 my-lg-0" action="Query" style="width:300px; margin-right:10px">
				<input class="form-control mr-sm-2 col-sm-7 ml-auto " type="search" name="search"
					placeholder="请输入关键词" value="${key}" aria-label="Search" >
				<button class="btn btn-outline-light my-2 my-sm-0" type="submit">搜索</button>
				</form>
				
				<img alt="comment" src="photo/head.png" width=25px height=25px style="margin-left:30px; margin-right:0px">
				
				<ul class="navbar-nav ml-sm-2 ml-auto col-sm-1">
					<li class="nav-item dropdown">
						<a id="Uname" class="nav-link dropdown-toggle active" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></a>

						<!-- 下拉列表 -->
						<div id="Dropdown" class="dropdown-menu" style="min-width:120%" aria-labelledby="navbarDropdown">
						</div>
						 
						<script>
							function loginCheck() {
								var xhttp = new XMLHttpRequest();
								xhttp.onreadystatechange = function() {
									if (this.readyState == 4 && this.status == 200) {
										document.getElementById("Uname").innerHTML =
										this.responseText;
									}
									else document.getElementById("Uname").innerHTML =
										"无响应";
								};
								xhttp.open("GET", "/loginCheck", true);
								xhttp.send();
							}
							loginCheck();
						</script>

						<script>
							function dropdown() {
								var xhttp = new XMLHttpRequest();
								xhttp.onreadystatechange = function() {
									if (this.readyState == 4 && this.status == 200) {
										document.getElementById("Dropdown").innerHTML =
										this.responseText;
									}
									else document.getElementById("Dropdown").innerHTML =
										"无响应";
								};
								xhttp.open("GET", "/dropdown", true);
								xhttp.send();
							}
							dropdown();
						</script>

						<script>
							function logout() {
								var xhttp = new XMLHttpRequest();
								xhttp.open("GET", "/logout", true);
								xhttp.send();
								loginCheck();
								dropdown();
							}
						</script>
						
					</li>
				</ul>
				
			</div>
		</nav>

		<!-- 内容 -->
		<div class="row" style="margin-top: 15px">

			<div class="col-9" style="margin-bottom:20px">
			
				<div class="card shadow">
					
  					<div class="card-header" style="font-weight:bold; height:50px" >
  						<a class="btn" href="RankAction?flag=new" style="float:right; width:60px; margin-top:-6px">最新</a>
  						<p style="float:right">/</p>
  						<a class="btn" href="RankAction?flag=hot" style="float:right; width:60px; margin-top:-6px">最热</a>
  						<p style="margin-left:10px">博客列表</p>
  					</div>
					
					<div class="card-body" style="padding:0px;">
						<div id="carouselExampleIndicators" class="carousel slide"
							data-ride="carousel">
							<ol class="carousel-indicators">
								<li data-target="#carouselExampleIndicators" data-slide-to="0"
									class="active"></li>
								<li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
								<li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
							</ol>
							<div class="carousel-inner">
								<div class="carousel-item active">
									<img class="d-block w-100"
										src="photo/002.jpg?auto=yes&bg=777&fg=555&text=First slide"
										alt="First slide">
									<div class="carousel-caption d-none d-md-block"
										style="transform: translateY(-50%)">
										<h1 class="display-5">
											<a href="BlogInfo?blogId=${blogRank.get(0).getId()}"
												style="text-decoration: none; color: #E0E0E0"
												onmouseover="this.style.color='#FFFFFF'"
												onmouseout="this.style.color='#E0E0E0'">${blogRank.get(0).getTitle()}</a>
										</h1>
										<br>
										<p>Author：
											<a href="UserInfo?username=${blogRank.get(0).author}&&flag=hot" style="color: #FFFFFF">
												${blogRank.get(0).author}
											</a>
										</p>
									</div>
								</div>
								<div class="carousel-item">
									<img class="d-block w-100"
										src="photo/001.jpg?auto=yes&bg=666&fg=444&text=Second slide"
										alt="Second slide">
									<div class="carousel-caption d-none d-md-block"
										style="transform: translateY(-50%)">
										<h1 class="display-5">
											<a href="BlogInfo?blogId=${blogRank.get(1).getId()}" 
												style="text-decoration: none; color: #E0E0E0"
												onmouseover="this.style.color='#FFFFFF'"
												onmouseout="this.style.color='#E0E0E0'">${blogRank.get(1).getTitle()}</a>
										</h1>
										<br>
										<p>Author：
											<a href="UserInfo?username=${blogRank.get(1).author}&&flag=hot" style="color: #FFFFFF">
												${blogRank.get(1).author}
											</a>
										</p>
									</div>
								</div>
								<div class="carousel-item">
									<img class="d-block w-100"
										src="photo/003.jpg?auto=yes&bg=555&fg=333&text=Third slide"
										alt="Third slide">
									<div class="carousel-caption d-none d-md-block"
										style="transform: translateY(-50%)">
										<h1 class="display-5">
											<a href="BlogInfo?blogId=${blogRank.get(2).getId()}" 
												style="text-decoration: none; color: #E0E0E0"
												onmouseover="this.style.color='#FFFFFF'"
												onmouseout="this.style.color='#E0E0E0'">${blogRank.get(2).getTitle()}</a>
										</h1>
										<br>
										<p>Author：
											<a href="UserInfo?username=${blogRank.get(2).author}&&flag=hot" style="color: #FFFFFF">
												${blogRank.get(2).author}
											</a>
										</p>
									</div>
								</div>
							</div>
							<a class="carousel-control-prev" href="#carouselExampleIndicators"
								role="button" data-slide="prev"> <span
								class="carousel-control-prev-icon" aria-hidden="true"></span> <span
								class="sr-only">Previous</span>
							</a> <a class="carousel-control-next" href="#carouselExampleIndicators"
								role="button" data-slide="next"> <span
								class="carousel-control-next-icon" aria-hidden="true"></span> <span
								class="sr-only">Next</span>
							</a>
						</div>
					</div>
					<div class="card-body" style="padding:0px;">
						<div style="padding:20px; padding-left:30px">
						
							<c:forEach items="${blogRank}" var="blog" begin="3">
								<div style="padding:0px; width:100%; height:100px;">
								
									<div class="float-left" style="width: 500px">
										<div class="float-right">
											 —— 
											 <a href="UserInfo?username=${blog.author}&&flag=hot" style="color: #272727">
											 	${blog.author}
											 </a>
										</div>
										<div style="font-weight: bold">
											<a href="BlogInfo?blogId=${blog.id}" style="color: #272727">${blog.title}</a>
										</div>
										<div style="margin-top:10px">
											<a href="BlogInfo?blogId=${blog.id}" style="text-decoration: none; color: #272727">${blog.bodyHead}</a>
										</div>
									</div>
									
									<div class="float-right">
										<div class="float-right"
											style="width: 70px; margin-top: 15px;">
											<h6
												style="width: 40px; margin-left: 10px; float: right">${blog.pageview}</h6>
											<img alt="read" src="photo/read.png" width="20px"
												style="float: right">
										</div>
										<div class="float-right"
											style="width: 70px; margin-top: 15px;">
											<h6
												style="width: 40px; margin-left: 10px; float: right">${blog.like}</h6>
											<img alt="read" src="photo/like.png" width="20px"
												style="float: right">
										</div>
										<div class="float-right"
											style="width: 70px; margin-top: 15px;">
											<h6
												style="width: 40px; margin-left: 10px; float: right">${blog.comment}</h6>
											<img alt="read" src="photo/comment.png" width="20px"
												style="float: right">
										</div>
									</div>
									
									<div class="float-right" style="margin-right:65px; margin-top:20px">
										<p>${blog.timeCn}</p>
									</div>
									
								</div>
								<div class="dropdown-divider" style="height:20px;width:100%"></div>
			        		
			        		</c:forEach>
						</div>
						
					</div>
				
				</div>

			</div>

			<!-- 右边栏 -->
			<div class="col-lg-3 ">
        <div class="card shadow" style="margin-bottom:20px">

          <div class="card-header" align="center" style="font-weight:bold">排行榜</div>
          <div class="card-body" style="height:600px; padding:0px">
            <form action="RankAction">
            <table class="table table-hover">
              <thead>
                <tr align="center">
                  <td scope="col" width="50%">用户名</td>
                  <td scope="col" width="50%">总访问量</td>
                </tr>
              </thead>
              <tbody>
                <c:forEach items="${userRank}" var="user">
                <tr align="center">
                  <td>
                    <a href="UserInfo?username=${user.username}&&flag=hot" style="color: #272727">
                      ${user.username}
                    </a>
                  </td>
                  <td>${user.sum}</td>
                </tr>
                </c:forEach>
              </tbody>
            </table>
            </form>
          </div>
          <div class="card-footer text-muted text-center" style="height:40px;"></div>
        
        </div>
			</div>

		</div>
	</div>

</body>
</html>